# Dispatchr

## Stage 0 ‚Äî Core Dispatch Engine

### ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—É —Å—ñ—Ç–∫—É –º—ñ—Å—Ç–∞ (0‚Äì100 –ø–æ X —Ç–∞ Y)
- –°—Ç–≤–æ—Ä–µ–Ω–æ –º–æ–¥–µ–ª—å `Courier`
  - id
  - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (x, y)
  - —Å—Ç–∞—Ç—É—Å: `idle | delivering`
  - –∞–∫—Ç–∏–≤–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –°—Ç–≤–æ—Ä–µ–Ω–æ –º–æ–¥–µ–ª—å `Order`
  - id
  - pickup –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
  - dropoff –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
  - —Å—Ç–∞—Ç—É—Å: `pending | assigned | completed`
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `DispatchSystem`
  - –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ –ø–∞–º º—è—Ç—ñ
  - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–∑–ø–æ–¥—ñ–ª—É:
  - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Manhattan distance
  - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –Ω–∞–π–±–ª–∏–∂—á–æ–º—É –≤—ñ–ª—å–Ω–æ–º—É –∫—É—Ä º—î—Ä—É

–§–æ—Ä–º—É–ª–∞ –≤—ñ–¥—Å—Ç–∞–Ω—ñ:

|x1 - x2| + |y1 - y2|

---

### ‚ñ∂ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

1. –î–æ–¥–∞—Ç–∏ –∫—É—Ä º—î—Ä—ñ–≤:

```js
system.addCourier(new Courier(1, 10, 10));
system.addCourier(new Courier(2, 50, 50));
```

2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:

```js
const order = new Order(101, { x: 12, y: 9 }, { x: 80, y: 80 });
system.createOrder(order);
```

3. –ó–∞–ø—É—Å–∫:

```
node src/index.js
```

### ‚úî –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º—É—î —Å—Ç–∞—Ç—É—Å `assigned`
- –ù–∞–π–±–ª–∏–∂—á–∏–π –∫—É—Ä º—î—Ä –∑–º—ñ–Ω—é—î —Å—Ç–∞—Ç—É—Å –Ω–∞ `delivering`
- –í–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—ñ –ø–æ–∫–∞–∑—É—î –æ–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏

```
DispatchSystem {
  couriers: [
    Courier {
      id: 1,
      x: 10,
      y: 10,
      status: 'delivering',
      currentOrderId: 101
    },
    Courier {
      id: 2,
      x: 50,
      y: 50,
      status: 'idle',
      currentOrderId: null
    }
  ],
  orders: [
    Order {
      id: 101,
      pickup: [Object],
      dropoff: [Object],
      status: 'assigned',
      assignedCourierId: 1
    }
  ]
}
```

---

Stage 0 –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –õ–æ–≥—ñ–∫–∞ —è–¥—Ä–∞ –ø—Ä–∞—Ü—é—î.

---

## Stage 1 ‚Äî Basic MVP

### üéØ –ú–µ—Ç–∞

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–±–æ—á–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–π–±–ª–∏–∂—á–æ–º—É –≤—ñ–ª—å–Ω–æ–º—É –∫—É—Ä º—î—Ä—É –∑ unit-—Ç–µ—Å—Ç–∞–º–∏.

---

### ‚úÖ –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ

**–°–ø–∏—Å–æ–∫ –∫—É—Ä º—î—Ä—ñ–≤:**

- id
- —Å—Ç–∞—Ç—É—Å (`Free` / `Busy`)
- –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (x, y)

**–ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:**

- id
- –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É (x, y)

---

### ‚öô –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞

1. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∫—É—Ä º—î—Ä—ñ–≤ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º `Free`
2. –û–±—á–∏—Å–ª–µ–Ω–Ω—è Manhattan distance –¥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É
3. –ü–æ—à—É–∫ –Ω–∞–π–±–ª–∏–∂—á–æ–≥–æ –∫—É—Ä º—î—Ä–∞
4. –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É –∫—É—Ä º—î—Ä–∞ –Ω–∞ `Busy`
5. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON

–Ø–∫—â–æ –≤—ñ–ª—å–Ω–∏—Ö –∫—É—Ä º—î—Ä—ñ–≤ –Ω–µ–º–∞—î ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è:

```

{ "status": "No couriers available" }

```

---

### üì¶ –ü–æ–≤–µ—Ä—Ç–∞—î–º–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—É—Å–ø—ñ—à–Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è)

```json
{
  "status": "Assigned",
  "orderId": 101,
  "courierId": 1,
  "distance": 3
}
```

---

### üß™ Unit Tests

–î–æ–¥–∞–Ω–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Jest.

–ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó:

- ‚úî –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–π–±–ª–∏–∂—á–æ–≥–æ –∫—É—Ä º—î—Ä–∞
- ‚úî –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤—ñ–ª—å–Ω–∏—Ö –∫—É—Ä º—î—Ä—ñ–≤

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:

```
npm test
```

---

Stage 1 –∑–∞–≤–µ—Ä—à–µ–Ω–æ.
MVP –ª–æ–≥—ñ–∫–∞ —ñ–∑ —Ç–µ—Å—Ç–∞–º–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞.

---

## Stage 2 ‚Äî Extended Dispatch + UI

### üéØ –ú–µ—Ç–∞

–†–æ–∑—à–∏—Ä–∏—Ç–∏ MVP –¥–æ –±—ñ–ª—å—à —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä—ñ—é: –¥–æ–¥–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è –ø–æ –≤–∞–∑—ñ, —Ç–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É –∫—É—Ä º—î—Ä–∞ —Ç–∞ –±–∞–∑–æ–≤–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–æ—é.

---

### ‚úÖ –©–æ –±—É–ª–æ –¥–æ–¥–∞–Ω–æ

- –û–Ω–æ–≤–ª–µ–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º `assignCourier`:
  - –≤—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è `maxWeight` –∫—É—Ä º—î—Ä–∞
  - –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω—å, —è–∫—ñ –Ω–µ–º–æ–∂–ª–∏–≤–æ –ø—Ä–∏–∑–Ω–∞—á–∏—Ç–∏, –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å `Queued`
- –î–æ–¥–∞–Ω–æ –∫–ª–∞—Å–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É –∫—É—Ä º—î—Ä—ñ–≤:
  - `walker` (–¥–æ 5 –∫–≥)
  - `bicycle` (–¥–æ 15 –∫–≥)
  - `car` (–¥–æ 50 –∫–≥)
- –†–æ–∑—à–∏—Ä–µ–Ω–æ –º–æ–¥–µ–ª—å –∫—É—Ä º—î—Ä–∞ –ø–æ–ª—è–º–∏ `vehicle`, `maxWeight`, `completedOrdersToday`.
- –î–æ–¥–∞–Ω–æ –±–∞–∑–æ–≤–∏–π UI (`public/index.html`, `public/js/app.js`, `public/css/style.css`):
  - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—É—Ä º—î—Ä—ñ–≤
  - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å
  - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∫—É—Ä º—î—Ä—ñ–≤ —ñ –ª–æ–≥—ñ–≤
- –î–æ–¥–∞–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä—É –¥–∞–Ω–∏—Ö (init), —â–æ–± —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å —É–∂–µ –∑ —Ç–µ—Å—Ç–æ–≤–∏–º–∏ —Å—É—Ç–Ω–æ—Å—Ç—è–º–∏.

---

### üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Stage 2

–†–æ–∑—à–∏—Ä–µ–Ω–æ unit-—Ç–µ—Å—Ç–∏ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤:

- ‚úî –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫—É—Ä º—î—Ä–∞ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—é –≤–∞–Ω—Ç–∞–∂–æ–ø—ñ–¥–π–æ–º–Ω—ñ—Å—Ç—é
- ‚úî –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `Queued`, —è–∫—â–æ –≤–∞–≥–∞ –ø–µ—Ä–µ–≤–∏—â—É—î –ª—ñ–º—ñ—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫—É—Ä º—î—Ä—ñ–≤
- ‚úî –±–∞–∑–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–π–±–ª–∏–∂—á–æ–≥–æ –∫—É—Ä º—î—Ä–∞

–ó–∞–ø—É—Å–∫:

```
npm test
```

---

Stage 2 –∑–∞–≤–µ—Ä—à–µ–Ω–æ.
–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–π—à–ª–∞ –≤—ñ–¥ ¬´—Ç—ñ–ª—å–∫–∏ —è–¥—Ä–∞¬ª –¥–æ MVP —ñ–∑ UI —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ –¥–æ–º–µ–Ω–Ω–æ—ó –ª–æ–≥—ñ–∫–∏.

---

## Stage 3 ‚Äî Queue, Fairness, Simulation

### üéØ –ú–µ—Ç–∞

–ó—Ä–æ–±–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É dispatch-—Å–∏—Å—Ç–µ–º–∏ –±–ª–∏–∂—á–æ—é –¥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –¥–æ—Å—Ç–∞–≤–∫–∏: –¥–æ–¥–∞—Ç–∏ —á–µ—Å–Ω—ñ—à–∏–π –≤–∏–±—ñ—Ä –∫—É—Ä º—î—Ä–∞, —á–µ—Ä–≥—É –∑–∞–º–æ–≤–ª–µ–Ω—å —Ç–∞ —Å–∏–º—É–ª—è—Ü—ñ—é –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —É —á–∞—Å—ñ.

---

### ‚úÖ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

- –î–æ–¥–∞–Ω–æ –ª–æ–≥—ñ–∫—É —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–≥–æ –≤–∏–±–æ—Ä—É –∫—É—Ä º—î—Ä–∞:
  - —è–∫—â–æ –≤—ñ–¥—Å—Ç–∞–Ω—ñ –±–ª–∏–∑—å–∫—ñ (—Ä—ñ–∑–Ω–∏—Ü—è –¥–æ 1), –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –º–∞—î –∫—É—Ä º—î—Ä –∑ –º–µ–Ω—à–∏–º `completedOrdersToday`
  - —è–∫—â–æ —Ä—ñ–∑–Ω–∏—Ü—è –≤—ñ–¥—Å—Ç–∞–Ω—ñ –±—ñ–ª—å—à–∞ ‚Äî –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –∑–∞ –±–ª–∏–∂—á–∏–º –∫—É—Ä º—î—Ä–æ–º
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ä–æ–±–æ—á—É —á–µ—Ä–≥—É –∑–∞–º–æ–≤–ª–µ–Ω—å:
  - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, —è–∫—ñ –Ω–µ–º–æ–∂–ª–∏–≤–æ –æ–±—Ä–æ–±–∏—Ç–∏ –æ–¥—Ä–∞–∑—É, —Å—Ç–∞—é—Ç—å —É `queue`
  - –ø—ñ—Å–ª—è –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –∫—É—Ä º—î—Ä–∞ —á–µ—Ä–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
- –î–æ–¥–∞–Ω–æ —Å–∏–º—É–ª—è—Ü—ñ—é –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —É —á–∞—Å—ñ (–∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Ç–∞–π–º–µ—Ä), —â–æ–± —Å—Ç–∞—Ç—É—Å–∏ `Busy/Free` —Ç–∞ —Ä—É—Ö —á–µ—Ä–≥–∏ –±—É–ª–∏ –≤–∏–¥–∏–º–∏–º–∏ —É UI.
- –ù–∞ —Å—Ç–∞—Ä—Ç—ñ —Å–∏—Å—Ç–µ–º–∏ –¥–æ–¥–∞—é—Ç—å—Å—è:
  - –ø–æ—á–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∏
  - —Å—Ç–∞—Ä—Ç–æ–≤—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (—á–∞—Å—Ç–∏–Ω–∞ –∑ –Ω–∏—Ö –æ–¥—Ä–∞–∑—É –≤ —Ä–æ–±–æ—Ç—ñ, —á–∞—Å—Ç–∏–Ω–∞ ‚Äî —É —á–µ—Ä–∑—ñ)
- –û–Ω–æ–≤–ª–µ–Ω–æ UI:
  - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è ID –¥–ª—è –∫—É—Ä º—î—Ä—ñ–≤ —ñ –∑–∞–º–æ–≤–ª–µ–Ω—å (—Ä—É—á–Ω—ñ –ø–æ–ª—è ID –ø—Ä–∏–±—Ä–∞–Ω—ñ)
  - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤, –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—å —ñ —Å—Ç–∞–Ω—É —á–µ—Ä–≥–∏
  - –ø–æ–∫—Ä–∞—â–µ–Ω–∞ –ø–∞–Ω–µ–ª—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ (–ª–æ–≥—ñ–≤) —Ç–∞ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—Ç–∫–∞ –±–æ–∫–æ–≤–æ—ó –ø–∞–Ω–µ–ª—ñ

---

### üìå –ü—ñ–¥—Å—É–º–æ–∫ Stage 3

–ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ Dispatchr —Å—Ç–∞–≤ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è, –∞ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ—é –º—ñ–Ω—ñ-—Å–∏–º—É–ª—è—Ü—ñ—î—é –º—ñ—Å—å–∫–æ—ó –¥–æ—Å—Ç–∞–≤–∫–∏ –∑ –≤–∏–¥–∏–º–æ—é —á–µ—Ä–≥–æ—é, —á–∞—Å–æ–≤–æ—é –¥–∏–Ω–∞–º—ñ–∫–æ—é —Ç–∞ –±—ñ–ª—å—à —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–º –±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º—ñ–∂ –∫—É—Ä º—î—Ä–∞–º–∏.

–ó–∞–ø—É—Å–∫:

```
npm start
```

–¢–µ—Å—Ç–∏:

```
npm test
```
